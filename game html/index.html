<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¬¬äºŒå…³ï¼šå™¨æè§£ç </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        body {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 5px;
            overflow: hidden;
        }
        
        .game-container {
            width: 100%;
            max-width: 500px;
            height: 95vh;
            max-height: 850px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }
        
        /* æ ‡é¢˜é¡µé¢æ ·å¼ */
        .splash-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            flex-grow: 1;
            padding: 30px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            color: white;
            animation: fadeIn 1s ease-out;
        }
        
        .splash-title {
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.2);
            animation: titlePulse 2s infinite alternate;
        }
        
        .splash-subtitle {
            font-size: 1.3rem;
            margin-bottom: 40px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        /* è§„åˆ™é¡µé¢æ ·å¼ - ä¼˜åŒ–ç‰ˆ */
        .rules-screen {
            display: none;
            padding: 25px 20px;
            flex-grow: 1;
            flex-direction: column;
            overflow-y: auto;
            background: linear-gradient(135deg, #e8f2ff 0%, #f0f7ff 100%); /* æµ…è“è‰²æ¸å˜èƒŒæ™¯ */
        }
        
        .rules-header {
            text-align: center;
            margin-bottom: 25px;
        }
        
        .rules-title {
            font-size: 2rem;
            color: #4a6fc4; /* è“è‰²æ ‡é¢˜ */
            margin-bottom: 10px;
        }
        
        .rules-subtitle {
            font-size: 1.2rem;
            color: #6b7a9f; /* æµ…è“è‰²å‰¯æ ‡é¢˜ */
        }
        
        .rules-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px 20px;
            margin-bottom: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            text-align: center;
            border: 1px solid rgba(200, 220, 255, 0.5);
        }
        
        .rules-text {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .scenes-intro {
            font-size: 1rem;
            color: #666;
            margin-bottom: 15px;
        }
        
        .scenes-container {
            display: flex;
            flex-wrap: nowrap; /* ç¡®ä¿ä¸æ¢è¡Œ */
            justify-content: space-between; /* å¹³å‡åˆ†å¸ƒ */
            gap: 8px; /* å‡å°‘é—´è· */
            margin-bottom: 10px;
            overflow-x: auto; /* å…è®¸æ°´å¹³æ»šåŠ¨ */
            padding-bottom: 5px;
            -webkit-overflow-scrolling: touch; /* iOSå¹³æ»‘æ»šåŠ¨ */
        }
        
        .scene-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 0 0 auto; /* ä¸ä¼¸ç¼©ï¼Œä¸æ”¶ç¼©ï¼Œè‡ªåŠ¨å®½åº¦ */
            width: 18%; /* è®¾ç½®å›ºå®šå®½åº¦ï¼Œ5ä¸ªå°±æ˜¯90%ï¼ŒåŠ ä¸Šé—´è·æ­£å¥½100% */
            padding: 10px 5px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border: 1px solid rgba(200, 220, 255, 0.5);
        }
        
        .scene-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .scene-icon {
            font-size: 1.5rem;
            margin-bottom: 6px;
        }
        
        .scene-name {
            font-size: 0.7rem;
            color: #666;
            text-align: center;
            line-height: 1.2;
        }
        
        .game-tip {
            font-size: 0.9rem;
            color: #4a6fc4;
            font-weight: bold;
            margin-top: 15px;
            padding: 10px;
            background: rgba(74, 111, 196, 0.08);
            border-radius: 10px;
            border: 1px solid rgba(200, 220, 255, 0.5);
        }
        
        /* åŠ¨ç”»åŒºåŸŸæ ·å¼ */
        .animation-area {
            height: 180px;
            position: relative;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(200, 220, 255, 0.5);
        }
        
        .track {
            position: absolute;
            bottom: 20%;
            left: 0;
            width: 100%;
            height: 8px;
            background: #333;
            border-radius: 4px;
        }
        
        .track::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 20px,
                #fff 20px,
                #fff 40px
            );
            border-radius: 4px;
        }
        
        .character-animation {
            position: absolute;
            width: 45px;
            height: 45px;
            background: #4d96ff;
            border-radius: 50%;
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.3rem;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15);
            top: 50%;
            left: 10%;
            transform: translateY(-50%);
            animation: characterRun 4s infinite linear;
        }
        
        .fire-animation {
            position: absolute;
            width: 30px;
            height: 40px;
            z-index: 5;
            top: 50%;
            left: 20%;
            transform: translateY(-50%);
            animation: fireChase 4s infinite linear;
        }
        
        .fire-main-animation {
            position: absolute;
            width: 24px;
            height: 32px;
            background: linear-gradient(to top, #ff3366 0%, #ff6633 40%, #ff9933 80%, #ffcc33 100%);
            border-radius: 50% 50% 30% 30% / 60% 60% 40% 40%;
            filter: blur(0.5px);
            animation: flame-flicker 1.2s infinite alternate;
            box-shadow: 
                0 0 8px #ff3366,
                0 0 12px #ff9933;
            bottom: 0;
            left: 3px;
        }
        
        .fire-sparkle-animation {
            position: absolute;
            width: 8px;
            height: 10px;
            background: #ffff99;
            border-radius: 50%;
            filter: blur(1px);
            animation: sparkle-twinkle 1.5s infinite alternate;
            box-shadow: 0 0 6px #ffff99;
        }
        
        .fire-sparkle-animation:nth-child(2) {
            top: -2px;
            left: 6px;
            animation-delay: 0.3s;
        }
        
        .fire-sparkle-animation:nth-child(3) {
            top: -4px;
            right: 8px;
            animation-delay: 0.6s;
        }
        
        .fire-sparkle-animation:nth-child(4) {
            top: 2px;
            left: 12px;
            animation-delay: 0.9s;
        }
        
        /* å¼€å§‹æŒ‰é’®æ ·å¼ - è“è‰²æ¸å˜ */
        .start-btn-container {
            padding: 10px 0;
            flex-shrink: 0;
        }
        
        .start-btn {
            display: block;
            margin: 0 auto;
            padding: 16px 45px;
            background: linear-gradient(135deg, #6a93cb 0%, #a4bfef 100%);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(106, 147, 203, 0.3);
            transition: all 0.3s ease;
            width: 80%;
            max-width: 280px;
            position: relative;
            overflow: hidden;
        }
        
        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(106, 147, 203, 0.4);
        }
        
        .start-btn:active {
            transform: translateY(1px);
            box-shadow: 0 5px 15px rgba(106, 147, 203, 0.3);
        }
        
        /* ç‚¹å‡»æŒ‰é’®æ—¶çš„åŠ¨æ€æ•ˆæœ */
        .start-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            transition: all 0.6s;
        }
        
        .start-btn.clicked::before {
            left: 100%;
        }
        
        /* æ¸¸æˆé¡µé¢æ ·å¼ */
        .game-screen {
            display: none;
            padding: 5px 10px;
            position: relative;
            flex-grow: 1;
            flex-direction: column;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
            flex-shrink: 0;
        }
        
        .game-title {
            font-size: 1.2rem;
            color: #ff6b6b;
            font-weight: bold;
        }
        
        .timer {
            font-size: 1rem;
            font-weight: bold;
            color: #ff6b6b;
            background: white;
            padding: 5px 10px;
            border-radius: 50px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .scene-title {
            font-size: 1.1rem;
            color: #ff6b6b;
            text-align: center;
            margin-bottom: 5px;
            flex-shrink: 0;
        }
        
        .game-area {
            position: relative;
            width: 100%;
            flex-grow: 1;
            min-height: 400px;
            background: #f8f9fa;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
            touch-action: none;
        }
        
        .character {
            position: absolute;
            width: 45px;
            height: 45px;
            background: #4d96ff;
            border-radius: 50%;
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.3rem;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s;
        }
        
        .fire {
            position: absolute;
            width: 30px;
            height: 40px;
            z-index: 5;
            transition: all 0.8s ease-in-out;
        }
        
        .fire-main {
            position: absolute;
            width: 24px;
            height: 32px;
            background: linear-gradient(to top, #ff3366 0%, #ff6633 40%, #ff9933 80%, #ffcc33 100%);
            border-radius: 50% 50% 30% 30% / 60% 60% 40% 40%;
            filter: blur(0.5px);
            animation: flame-flicker 1.2s infinite alternate;
            box-shadow: 
                0 0 8px #ff3366,
                0 0 12px #ff9933;
            bottom: 0;
            left: 3px;
        }
        
        .fire-sparkle {
            position: absolute;
            width: 8px;
            height: 10px;
            background: #ffff99;
            border-radius: 50%;
            filter: blur(1px);
            animation: sparkle-twinkle 1.5s infinite alternate;
            box-shadow: 0 0 6px #ffff99;
        }
        
        .extinguisher {
            position: absolute;
            width: 50px;
            height: 50px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s;
            pointer-events: none;
            z-index: 8;
        }
        
        .extinguisher-body {
            width: 45px;
            height: 45px;
            border-radius: 8px;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 0.65rem;
            font-weight: bold;
            text-align: center;
            padding: 5px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
        }
        
        /* ç»“æœé¡µé¢æ ·å¼ */
        .result-screen {
            display: none;
            padding: 20px 15px;
            text-align: center;
            flex-grow: 1;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background: linear-gradient(135deg, #e8f2ff 0%, #f0f7ff 100%);
        }
        
        .result-icon {
            font-size: 3.5rem;
            margin-bottom: 15px;
        }
        
        .result-message {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #4a6fc4;
        }
        
        .result-stats {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #666;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-value {
            font-weight: bold;
            font-size: 1rem;
            color: #4a6fc4;
        }
        
        /* é‡æ–°å¼€å§‹æŒ‰é’® */
        .restart-btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, #6a93cb 0%, #a4bfef 100%);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(106, 147, 203, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .restart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(106, 147, 203, 0.4);
        }
        
        .restart-btn:active {
            transform: translateY(1px);
            box-shadow: 0 5px 15px rgba(106, 147, 203, 0.3);
        }
        
        .restart-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            transition: all 0.6s;
        }
        
        .restart-btn:focus:not(:active)::before {
            animation: ripple 1s ease-out;
        }
        
        .instructions {
            text-align: center;
            margin-top: 8px;
            color: #666;
            font-size: 0.8rem;
            padding: 0 10px;
            flex-shrink: 0;
        }
        
        /* éš¾åº¦å¢åŠ æç¤º */
        .difficulty-warning {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 107, 107, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.1rem;
            z-index: 25;
            animation: pulse-warning 1.5s ease-out;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* ç²’å­æ•ˆæœ */
        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 15;
        }
        
        /* åŠ¨ç”»å®šä¹‰ */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes titlePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes characterRun {
            0% { left: 10%; }
            25% { left: 30%; }
            50% { left: 50%; }
            75% { left: 70%; }
            100% { left: 90%; }
        }
        
        @keyframes fireChase {
            0% { left: 5%; }
            25% { left: 25%; }
            50% { left: 45%; }
            75% { left: 65%; }
            100% { left: 85%; }
        }
        
        @keyframes flame-flicker {
            0%, 100% { 
                transform: scale(1) translateY(0); 
                height: 32px;
            }
            25% { 
                transform: scale(1.08) translateY(-1px); 
                height: 34px;
            }
            50% { 
                transform: scale(0.95) translateY(1px); 
                height: 30px;
            }
            75% { 
                transform: scale(1.05) translateY(-0.5px); 
                height: 33px;
            }
        }
        
        @keyframes sparkle-twinkle {
            0%, 100% { 
                opacity: 0.3;
                transform: scale(0.8);
            }
            50% { 
                opacity: 1;
                transform: scale(1.2);
            }
        }
        
        @keyframes pulse-warning {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 480px) {
            .splash-title {
                font-size: 2rem;
            }
            
            .splash-subtitle {
                font-size: 1.1rem;
            }
            
            .rules-title {
                font-size: 1.7rem;
            }
            
            .rules-subtitle {
                font-size: 1rem;
            }
            
            .rules-card {
                padding: 20px 15px;
            }
            
            .scene-item {
                width: 18%; /* ä¿æŒå›ºå®šå®½åº¦ */
                padding: 8px 4px;
            }
            
            .scene-icon {
                font-size: 1.3rem;
            }
            
            .scene-name {
                font-size: 0.6rem;
            }
            
            .character-animation, .character {
                width: 40px;
                height: 40px;
            }
            
            .fire-animation, .fire {
                width: 25px;
                height: 35px;
            }
            
            .animation-area {
                height: 150px;
            }
        }
        
        @media (max-width: 360px) {
            .splash-title {
                font-size: 1.8rem;
            }
            
            .splash-subtitle {
                font-size: 1rem;
            }
            
            .rules-title {
                font-size: 1.5rem;
            }
            
            .scenes-container {
                gap: 5px;
            }
            
            .scene-item {
                width: 18%;
                padding: 6px 3px;
            }
            
            .scene-name {
                font-size: 0.55rem;
            }
        }
        
        /* è¶…å°å±å¹•é€‚é… */
        @media (max-width: 320px) {
            .scene-name {
                font-size: 0.5rem;
            }
            
            .scene-icon {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- æ ‡é¢˜é¡µé¢ -->
        <div class="splash-screen">
            <h1 class="splash-title">ç¬¬äºŒå…³ï¼šå™¨æè§£ç </h1>
            <p class="splash-subtitle">é€‰æ‹©æ­£ç¡®çš„ç­ç«å™¨æ‰‘ç­ç«ç¾ï¼</p>
        </div>
        
        <!-- ä¼˜åŒ–åçš„è§„åˆ™é¡µé¢ -->
        <div class="rules-screen">
            <div class="rules-header">
                <h2 class="rules-title">æ¸¸æˆè§„åˆ™</h2>
                <p class="rules-subtitle">æŒæ¡è§„åˆ™ï¼Œé¡ºåˆ©é€šå…³</p>
            </div>
            
            <div class="rules-card">
                <p class="rules-text">æ‹–åŠ¨æ¶ˆé˜²å‘˜èº²é¿ç«ç„°ï¼Œæ‰¾åˆ°ä¸åœºæ™¯å¯¹åº”çš„æ­£ç¡®ç­ç«å™¨ï¼</p>
                
                <p class="scenes-intro">ç³»ç»Ÿéšæœºåˆ†é…äº”ä¸ªåœºæ™¯ï¼š</p>
                
                <div class="scenes-container">
                    <div class="scene-item">
                        <div class="scene-icon">ğŸ›µ</div>
                        <div class="scene-name">ç”µåŠ¨è½¦èµ·ç«</div>
                    </div>
                    <div class="scene-item">
                        <div class="scene-icon">ğŸ³</div>
                        <div class="scene-name">æ²¹é”…èµ·ç«</div>
                    </div>
                    <div class="scene-item">
                        <div class="scene-icon">ğŸ”Œ</div>
                        <div class="scene-name">ç”µå™¨èµ·ç«</div>
                    </div>
                    <div class="scene-item">
                        <div class="scene-icon">â›½</div>
                        <div class="scene-name">æŸ´æ²¹æ³„éœ²èµ·ç«</div>
                    </div>
                    <div class="scene-item">
                        <div class="scene-icon">ğŸ“¦ï¸</div>
                        <div class="scene-name">æœ¨æ–™è´§æ¶èµ·ç«</div>
                    </div>
                </div>
                
                <div class="game-tip">
                    æ¯ä¸ªåœºæ™¯éƒ½æœ‰å¯¹åº”çš„æ­£ç¡®ç­ç«å™¨ï¼Œå°å¿ƒèº²é¿ç§»åŠ¨çš„ç«ç„°ï¼
                </div>
            </div>
            
            <!-- åŠ¨ç”»åŒºåŸŸ -->
            <div class="animation-area">
                <div class="track"></div>
                <div class="character-animation">ğŸ‘¨â€ğŸš’</div>
                <div class="fire-animation">
                    <div class="fire-sparkle-animation"></div>
                    <div class="fire-sparkle-animation"></div>
                    <div class="fire-sparkle-animation"></div>
                    <div class="fire-sparkle-animation"></div>
                    <div class="fire-main-animation"></div>
                </div>
            </div>
            
            <!-- å¼€å§‹æŒ‰é’®å®¹å™¨ -->
            <div class="start-btn-container">
                <button class="start-btn">å¼€å§‹æ¸¸æˆ</button>
            </div>
        </div>
        
        <!-- æ¸¸æˆé¡µé¢ -->
        <div class="game-screen">
            <div class="game-header">
                <div class="game-title">ç¬¬äºŒå…³ï¼šå™¨æè§£ç </div>
                <div class="timer">æ—¶é—´: <span id="time">30</span>ç§’</div>
            </div>
            <div class="scene-title" id="current-scene">åœºæ™¯åç§°</div>
            <div class="game-area" id="game-area">
                <!-- æ¸¸æˆå…ƒç´ å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
            </div>
            <div class="instructions">æ‹–åŠ¨å°äººèº²é¿ç«ç„°ï¼Œæ‰¾åˆ°æ­£ç¡®çš„ç­ç«å™¨ï¼</div>
        </div>
        
        <!-- ç»“æœé¡µé¢ -->
        <div class="result-screen">
            <div class="result-icon" id="result-icon">ğŸ‰</div>
            <div class="result-message" id="result-message">æ­å–œä½ æˆåŠŸäº†ï¼</div>
            <div class="result-stats">
                <div class="stat-item">
                    <div>æˆåŠŸæ¬¡æ•°</div>
                    <div class="stat-value" id="result-success-count">0</div>
                </div>
                <div class="stat-item">
                    <div>æœ€å¿«ç”¨æ—¶</div>
                    <div class="stat-value" id="result-best-time">--</div>
                </div>
                <div class="stat-item">
                    <div>æ­£ç¡®ç‡</div>
                    <div class="stat-value" id="result-accuracy">--</div>
                </div>
            </div>
            <button class="restart-btn">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>

    <script>
        // æ¸¸æˆæ•°æ®
        const scenes = [
            { name: "ç”µåŠ¨è½¦èµ·ç«", icon: "ğŸ›µ", correct: "å¹²ç²‰" },
            { name: "æ²¹é”…èµ·ç«", icon: "ğŸ³", correct: "ç­ç«æ¯¯" },
            { name: "ç”µå™¨èµ·ç«", icon: "ğŸ”Œ", correct: "äºŒæ°§åŒ–ç¢³" },
            { name: "æŸ´æ²¹æ³„éœ²èµ·ç«", icon: "â›½", correct: "æ³¡æ²«" },
            { name: "æœ¨æ–™è´§æ¶èµ·ç«", icon: "ğŸ“¦ï¸", correct: "æ°´åŸºå‹" }
        ];
        
        const extinguishers = [
            { name: "äºŒæ°§åŒ–ç¢³", color: "#4d96ff" },
            { name: "æ³¡æ²«", color: "#ff6b6b" },
            { name: "æ°´åŸºå‹", color: "#6bcf7f" },
            { name: "å¹²ç²‰", color: "#ffd166" },
            { name: "ç­ç«æ¯¯", color: "#a1a1a1" }
        ];
        
        // æ¸¸æˆé…ç½® - å¢åŠ ç«ç„°æ•°é‡
        const GameDifficulty = {
            NORMAL: {
                fireCount: 12,
                timeLimit: 30,
                fireSpeed: 0.08,
                minFireDistance: 70
            },
            HARD: {
                fireCount: 16,
                timeLimit: 30,
                fireSpeed: 0.12,
                minFireDistance: 60
            }
        };
        
        // æ¸¸æˆçŠ¶æ€
        const GameState = {
            currentScene: null,
            timer: null,
            timeLeft: 30,
            gameActive: false,
            fireIntervals: [],
            character: null,
            characterX: 0,
            characterY: 0,
            playerHasMoved: false,
            difficulty: GameDifficulty.NORMAL,
            startTime: 0,
            difficultyIncreased: false
        };
        
        // ç«ç„°ç®¡ç†å™¨
        const FireManager = {
            targets: [],
            elements: [],
            positions: [],
            lastDirections: [],
            collisionForces: [],
            lastPositions: [],
            stuckCounters: []
        };
        
        // æ¸¸æˆç»Ÿè®¡
        const GameStats = {
            successCount: 0,
            totalGames: 0,
            bestTime: null,
            sceneStats: {}
        };
        
        // æ ¹æ®å±å¹•å°ºå¯¸åŠ¨æ€è°ƒæ•´çš„å‚æ•°
        let screenSizeFactor = 1;
        let minFireDistance = 70;
        let playerSafeRadius = 120;
        let fireMoveSpeed = 0.08;
        let fireMoveSpeedIdle = 0.04;
        
        // DOMå…ƒç´ 
        const splashScreen = document.querySelector('.splash-screen');
        const rulesScreen = document.querySelector('.rules-screen');
        const gameScreen = document.querySelector('.game-screen');
        const resultScreen = document.querySelector('.result-screen');
        const startBtn = document.querySelector('.start-btn');
        const timeDisplay = document.getElementById('time');
        const currentSceneDisplay = document.getElementById('current-scene');
        const gameArea = document.getElementById('game-area');
        const resultIcon = document.getElementById('result-icon');
        const resultMessage = document.getElementById('result-message');
        const restartBtn = document.querySelector('.restart-btn');
        const resultSuccessCountEl = document.getElementById('result-success-count');
        const resultBestTimeEl = document.getElementById('result-best-time');
        const resultAccuracyEl = document.getElementById('result-accuracy');
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function init() {
            loadGameStats();
            updateStatsDisplay();
            
            // æ˜¾ç¤ºæ ‡é¢˜é¡µé¢ï¼Œ2ç§’ååˆ‡æ¢åˆ°è§„åˆ™é¡µé¢
            setTimeout(() => {
                splashScreen.style.display = 'none';
                rulesScreen.style.display = 'flex';
            }, 2000);
            
            // äº‹ä»¶ç›‘å¬
            startBtn.addEventListener('click', function() {
                // æ·»åŠ ç‚¹å‡»åŠ¨æ•ˆ
                this.classList.add('clicked');
                setTimeout(() => {
                    this.classList.remove('clicked');
                }, 600);
                
                // å¼€å§‹æ¸¸æˆ
                setTimeout(() => {
                    startRandomGame();
                }, 300);
            });
            
            restartBtn.addEventListener('click', restartGame);
        }
        
        // åŠ è½½æ¸¸æˆç»Ÿè®¡
        function loadGameStats() {
            const savedStats = localStorage.getItem('fireGameStats');
            if (savedStats) {
                Object.assign(GameStats, JSON.parse(savedStats));
            }
        }
        
        // ä¿å­˜æ¸¸æˆç»Ÿè®¡
        function saveGameStats() {
            localStorage.setItem('fireGameStats', JSON.stringify(GameStats));
        }
        
        // æ›´æ–°ç»Ÿè®¡æ˜¾ç¤º
        function updateStatsDisplay() {
            resultSuccessCountEl.textContent = GameStats.successCount;
            
            if (GameStats.bestTime) {
                resultBestTimeEl.textContent = GameStats.bestTime + 's';
            } else {
                resultBestTimeEl.textContent = '--';
            }
            
            if (GameStats.totalGames > 0) {
                const accuracy = Math.round((GameStats.successCount / GameStats.totalGames) * 100);
                resultAccuracyEl.textContent = accuracy + '%';
            } else {
                resultAccuracyEl.textContent = '--';
            }
        }
        
        // å¼€å§‹éšæœºæ¸¸æˆ
        function startRandomGame() {
            // éšæœºé€‰æ‹©ä¸€ä¸ªåœºæ™¯
            const sceneIndex = Math.floor(Math.random() * scenes.length);
            startSpecificGame(sceneIndex);
        }
        
        // å¼€å§‹ç‰¹å®šåœºæ™¯æ¸¸æˆ
        function startSpecificGame(sceneIndex) {
            GameState.currentScene = scenes[sceneIndex];
            
            // æ›´æ–°ç•Œé¢
            currentSceneDisplay.textContent = `${GameState.currentScene.icon} ${GameState.currentScene.name}`;
            
            // æ˜¾ç¤ºæ¸¸æˆç•Œé¢
            rulesScreen.style.display = 'none';
            gameScreen.style.display = 'flex';
            resultScreen.style.display = 'none';
            
            // é‡ç½®éš¾åº¦çŠ¶æ€
            GameState.difficulty = GameDifficulty.NORMAL;
            GameState.difficultyIncreased = false;
            
            // åˆå§‹åŒ–æ¸¸æˆåŒºåŸŸ
            initGameArea();
            
            // å¼€å§‹è®¡æ—¶
            GameState.timeLeft = GameState.difficulty.timeLimit;
            timeDisplay.textContent = GameState.timeLeft;
            clearInterval(GameState.timer);
            GameState.timer = setInterval(updateTimer, 1000);
            
            GameState.gameActive = true;
            GameState.playerHasMoved = false;
            GameState.startTime = Date.now();
            
            // æ›´æ–°æ¸¸æˆç»Ÿè®¡
            GameStats.totalGames++;
            updateStatsDisplay();
        }
        
        // å¢åŠ æ¸¸æˆéš¾åº¦
        function increaseDifficulty() {
            if (GameState.difficultyIncreased) return;
            
            GameState.difficultyIncreased = true;
            GameState.difficulty = GameDifficulty.HARD;
            
            // æ›´æ–°ç«ç„°ç§»åŠ¨é€Ÿåº¦
            calculateScreenFactor();
            
            // æ˜¾ç¤ºéš¾åº¦å¢åŠ æç¤º
            const warning = document.createElement('div');
            warning.className = 'difficulty-warning';
            warning.textContent = 'éš¾åº¦å¢åŠ ï¼ç«ç„°æ›´å¤šæ›´å¿«ï¼';
            gameArea.appendChild(warning);
            
            // 3ç§’åç§»é™¤æç¤º
            setTimeout(() => {
                if (warning.parentNode) {
                    warning.remove();
                }
            }, 3000);
        }
        
        // è®¡ç®—å±å¹•å°ºå¯¸å› å­
        function calculateScreenFactor() {
            const gameWidth = gameArea.offsetWidth;
            const gameHeight = gameArea.offsetHeight;
            
            // è®¡ç®—å±å¹•å°ºå¯¸å› å­ï¼ˆåŸºäºæ¸¸æˆåŒºåŸŸå°ºå¯¸ï¼‰
            const baseWidth = 400; // åŸºå‡†å®½åº¦
            const baseHeight = 600; // åŸºå‡†é«˜åº¦
            
            const widthFactor = gameWidth / baseWidth;
            const heightFactor = gameHeight / baseHeight;
            
            // ä½¿ç”¨è¾ƒå°çš„å› å­ï¼Œç¡®ä¿åœ¨å°å±å¹•ä¸Šä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ
            screenSizeFactor = Math.min(widthFactor, heightFactor, 1);
            
            // æ ¹æ®å±å¹•å°ºå¯¸è°ƒæ•´å‚æ•°
            minFireDistance = Math.floor(GameState.difficulty.minFireDistance * screenSizeFactor);
            playerSafeRadius = Math.floor(120 * screenSizeFactor);
            fireMoveSpeed = GameState.difficulty.fireSpeed * screenSizeFactor;
            fireMoveSpeedIdle = 0.04 * screenSizeFactor;
        }
        
        // åˆå§‹åŒ–æ¸¸æˆåŒºåŸŸ
        function initGameArea() {
            try {
                // æ¸…ç©ºæ¸¸æˆåŒºåŸŸ
                gameArea.innerHTML = '';
                
                // æ¸…é™¤ä¹‹å‰çš„ç«ç„°ç§»åŠ¨é—´éš”
                GameState.fireIntervals.forEach(interval => clearInterval(interval));
                GameState.fireIntervals = [];
                
                // é‡ç½®ç«ç„°ç®¡ç†å™¨
                FireManager.targets = [];
                FireManager.elements = [];
                FireManager.positions = [];
                FireManager.lastDirections = [];
                FireManager.collisionForces = [];
                FireManager.lastPositions = [];
                FireManager.stuckCounters = [];
                
                // è·å–æ¸¸æˆåŒºåŸŸå°ºå¯¸
                const gameWidth = gameArea.offsetWidth;
                const gameHeight = gameArea.offsetHeight;
                
                // è®¡ç®—å±å¹•å°ºå¯¸å› å­
                calculateScreenFactor();
                
                // è®¾ç½®ç©å®¶åˆå§‹ä½ç½® - å±å¹•ä¸‹æ–¹æ­£ä¸­é—´
                GameState.characterX = gameWidth / 2 - 22.5;
                GameState.characterY = gameHeight - 60;
                
                // æ·»åŠ è§’è‰²
                GameState.character = document.createElement('div');
                GameState.character.className = 'character';
                GameState.character.textContent = 'ğŸ‘¨â€ğŸš’';
                GameState.character.style.left = GameState.characterX + 'px';
                GameState.character.style.top = GameState.characterY + 'px';
                
                // æ·»åŠ è§¦æ‘¸æ‹–æ‹½åŠŸèƒ½
                let isDragging = false;
                let touchId = null;
                
                GameState.character.addEventListener('touchstart', startDrag, { passive: false });
                gameArea.addEventListener('touchmove', drag, { passive: false });
                gameArea.addEventListener('touchend', stopDrag);
                gameArea.addEventListener('touchcancel', stopDrag);
                
                function startDrag(e) {
                    if (!GameState.gameActive || isDragging) return;
                    
                    e.preventDefault();
                    const touch = e.touches[0];
                    touchId = touch.identifier;
                    isDragging = true;
                    GameState.playerHasMoved = true;
                }
                
                function drag(e) {
                    if (!isDragging || !GameState.gameActive) return;
                    
                    e.preventDefault();
                    
                    // æ‰¾åˆ°å¯¹åº”çš„è§¦æ‘¸ç‚¹
                    const touch = Array.from(e.touches).find(t => t.identifier === touchId);
                    if (!touch) return;
                    
                    const gameAreaRect = gameArea.getBoundingClientRect();
                    let x = touch.clientX - gameAreaRect.left - 22.5;
                    let y = touch.clientY - gameAreaRect.top - 22.5;
                    
                    // é™åˆ¶åœ¨æ¸¸æˆåŒºåŸŸå†…
                    x = Math.max(0, Math.min(x, gameWidth - 45));
                    y = Math.max(0, Math.min(y, gameHeight - 45));
                    
                    GameState.character.style.left = x + 'px';
                    GameState.character.style.top = y + 'px';
                    
                    // æ›´æ–°è§’è‰²ä½ç½®
                    GameState.characterX = x;
                    GameState.characterY = y;
                }
                
                function stopDrag() {
                    isDragging = false;
                    touchId = null;
                }
                
                gameArea.appendChild(GameState.character);
                
                // æ·»åŠ ç­ç«å™¨ - éšæœºåˆ†å¸ƒåœ¨ä¸ŠåŠéƒ¨åˆ†åŒºåŸŸ
                const shuffledExtinguishers = [...extinguishers].sort(() => Math.random() - 0.5);
                const correctExtinguisherIndex = shuffledExtinguishers.findIndex(ext => ext.name === GameState.currentScene.correct);
                
                // å…ˆæ”¾ç½®æ­£ç¡®ç­”æ¡ˆç­ç«å™¨ï¼Œç¡®ä¿å®ƒæ˜¯æœ€è¿œçš„
                const extinguisherPositions = [];
                
                for (let i = 0; i < shuffledExtinguishers.length; i++) {
                    const extinguisher = document.createElement('div');
                    extinguisher.className = 'extinguisher';
                    extinguisher.dataset.type = shuffledExtinguishers[i].name;
                    
                    // ç­ç«å™¨éšæœºåˆ†å¸ƒåœ¨å±å¹•ä¸ŠåŠéƒ¨åˆ†åŒºåŸŸ
                    let x, y;
                    let validPosition = false;
                    let attempts = 0;
                    
                    while (!validPosition && attempts < 150) {
                        // éšæœºä½ç½®åœ¨ä¸ŠåŠéƒ¨åˆ†åŒºåŸŸï¼ˆé¡¶éƒ¨40%åŒºåŸŸï¼‰
                        x = Math.random() * (gameWidth - 50);
                        y = Math.random() * (gameHeight * 0.4);
                        
                        // ç¡®ä¿ä¸è¶…å‡ºè¾¹ç•Œ
                        x = Math.max(10, Math.min(x, gameWidth - 50));
                        y = Math.max(10, Math.min(y, gameHeight * 0.4 - 50));
                        
                        // ç¡®ä¿ä¸å…¶ä»–ç­ç«å™¨ä¿æŒè·ç¦»
                        let tooClose = false;
                        for (const pos of extinguisherPositions) {
                            const distance = calculateDistance({x, y}, pos);
                            if (distance < 70 * screenSizeFactor) {
                                tooClose = true;
                                break;
                            }
                        }
                        
                        // ç¡®ä¿ä¸ç©å®¶èµ·å§‹ä½ç½®ä¿æŒè·ç¦»
                        const distanceToPlayer = calculateDistance({x, y}, {x: GameState.characterX, y: GameState.characterY});
                        
                        // å¦‚æœæ˜¯æ­£ç¡®ç­”æ¡ˆï¼Œç¡®ä¿å®ƒæ˜¯æœ€è¿œçš„ç­ç«å™¨ä¹‹ä¸€
                        let isTooClose = false;
                        if (i === correctExtinguisherIndex) {
                            // æ£€æŸ¥è¿™ä¸ªç­ç«å™¨æ˜¯å¦æ¯”å¤§å¤šæ•°å…¶ä»–ç­ç«å™¨æ›´è¿œ
                            let closerCount = 0;
                            for (let j = 0; j < extinguisherPositions.length; j++) {
                                const otherDistance = calculateDistance(extinguisherPositions[j], {x: GameState.characterX, y: GameState.characterY});
                                if (distanceToPlayer < otherDistance) {
                                    closerCount++;
                                }
                            }
                            // å¦‚æœè¿™ä¸ªç­ç«å™¨æ¯”è¶…è¿‡ä¸€åŠçš„å…¶ä»–ç­ç«å™¨æ›´è¿‘ï¼Œåˆ™é‡æ–°ç”Ÿæˆä½ç½®
                            isTooClose = closerCount > extinguisherPositions.length / 2;
                        }
                        
                        validPosition = !tooClose && distanceToPlayer > playerSafeRadius && !isTooClose;
                        attempts++;
                    }
                    
                    extinguisher.style.left = x + 'px';
                    extinguisher.style.top = y + 'px';
                    
                    const extinguisherBody = document.createElement('div');
                    extinguisherBody.className = 'extinguisher-body';
                    extinguisherBody.textContent = shuffledExtinguishers[i].name;
                    extinguisherBody.style.backgroundColor = shuffledExtinguishers[i].color;
                    
                    extinguisher.appendChild(extinguisherBody);
                    gameArea.appendChild(extinguisher);
                    
                    // è®°å½•ç­ç«å™¨ä½ç½®
                    extinguisherPositions.push({x, y});
                }
                
                // æ·»åŠ ç«ç„° - ç¡®ä¿åˆå§‹ä½ç½®ç»å¯¹å®‰å…¨
                const fireCount = GameState.difficulty.fireCount;
                
                // ä½¿ç”¨ç½‘æ ¼åˆ†å¸ƒç®—æ³•ç¡®ä¿ç«ç„°åˆå§‹ä½ç½®åˆ†æ•£
                const gridCols = 4;
                const gridRows = Math.ceil(fireCount / gridCols);
                const cellWidth = gameWidth / gridCols;
                const cellHeight = (gameHeight * 0.6) / gridRows;
                
                for (let i = 0; i < fireCount; i++) {
                    const fire = document.createElement('div');
                    fire.className = 'fire';
                    
                    let x, y;
                    let validPosition = false;
                    let attempts = 0;
                    
                    // ä½¿ç”¨ç½‘æ ¼åˆ†å¸ƒç®—æ³•
                    const col = i % gridCols;
                    const row = Math.floor(i / gridCols);
                    
                    // åœ¨ç½‘æ ¼å•å…ƒå†…éšæœºåˆ†å¸ƒï¼Œä½†ç¡®ä¿åœ¨å®‰å…¨è·ç¦»å¤–
                    while (!validPosition && attempts < 100) {
                        x = col * cellWidth + Math.random() * (cellWidth - 40);
                        y = row * cellHeight + Math.random() * (cellHeight - 50);
                        
                        // ç¡®ä¿ä¸è¶…å‡ºè¾¹ç•Œ
                        x = Math.max(15, Math.min(x, gameWidth - 45));
                        y = Math.max(15, Math.min(y, gameHeight - 55));
                        
                        // ç¡®ä¿ä¸ç©å®¶åˆå§‹ä½ç½®ä¿æŒå®‰å…¨è·ç¦»
                        const distanceToPlayer = calculateDistance({x, y}, {x: GameState.characterX, y: GameState.characterY});
                        
                        // ç¡®ä¿ä¸ä¸ä»»ä½•ç­ç«å™¨é‡å 
                        let tooCloseToExtinguisher = false;
                        for (const pos of extinguisherPositions) {
                            const distance = calculateDistance({x, y}, pos);
                            if (distance < 80 * screenSizeFactor) {
                                tooCloseToExtinguisher = true;
                                break;
                            }
                        }
                        
                        // ç¡®ä¿ä¸å…¶ä»–ç«ç„°ä¿æŒè·ç¦»
                        let tooCloseToOtherFire = false;
                        for (let j = 0; j < FireManager.positions.length; j++) {
                            const distance = calculateDistance({x, y}, FireManager.positions[j]);
                            if (distance < minFireDistance) {
                                tooCloseToOtherFire = true;
                                break;
                            }
                        }
                        
                        validPosition = distanceToPlayer > playerSafeRadius && !tooCloseToExtinguisher && !tooCloseToOtherFire;
                        attempts++;
                    }
                    
                    // å¦‚æœç½‘æ ¼åˆ†å¸ƒå¤±è´¥ï¼Œä½¿ç”¨éšæœºåˆ†å¸ƒ
                    if (!validPosition) {
                        attempts = 0;
                        while (!validPosition && attempts < 100) {
                            x = Math.random() * (gameWidth - 40);
                            y = Math.random() * (gameHeight * 0.6);
                            
                            x = Math.max(15, Math.min(x, gameWidth - 45));
                            y = Math.max(15, Math.min(y, gameHeight - 55));
                            
                            const distanceToPlayer = calculateDistance({x, y}, {x: GameState.characterX, y: GameState.characterY});
                            
                            validPosition = distanceToPlayer > 100 * screenSizeFactor;
                            attempts++;
                        }
                    }
                    
                    fire.style.left = x + 'px';
                    fire.style.top = y + 'px';
                    
                    // åˆ›å»ºç«ç„°å…ƒç´ 
                    const fireMain = document.createElement('div');
                    fireMain.className = 'fire-main';
                    
                    // åˆ›å»ºé—ªçƒçš„å°æ˜Ÿæ˜Ÿ
                    for (let j = 0; j < 4; j++) {
                        const sparkle = document.createElement('div');
                        sparkle.className = 'fire-sparkle';
                        fire.appendChild(sparkle);
                    }
                    
                    fire.appendChild(fireMain);
                    gameArea.appendChild(fire);
                    
                    // å­˜å‚¨ç«ç„°å…ƒç´ å’Œä½ç½®
                    FireManager.elements.push(fire);
                    FireManager.positions.push({x, y});
                    
                    // è®¾ç½®åˆå§‹ç›®æ ‡ä½ç½®ä¸ºå½“å‰ä½ç½®ï¼ˆç«ç„°æš‚æ—¶ä¸ç§»åŠ¨ï¼‰
                    FireManager.targets[i] = {x, y};
                    
                    // åˆå§‹åŒ–ç§»åŠ¨æ–¹å‘
                    FireManager.lastDirections[i] = Math.random() * Math.PI * 2; // éšæœºåˆå§‹æ–¹å‘
                    
                    // åˆå§‹åŒ–ç¢°æ’æ’æ–¥åŠ›
                    FireManager.collisionForces[i] = {x: 0, y: 0};
                    
                    // åˆå§‹åŒ–ä¸Šä¸€å¸§ä½ç½®
                    FireManager.lastPositions[i] = {x, y};
                    
                    // åˆå§‹åŒ–é™æ­¢è®¡æ•°å™¨
                    FireManager.stuckCounters[i] = 0;
                }
                
                // å»¶è¿Ÿ0.5ç§’å¯åŠ¨ç«ç„°ç§»åŠ¨
                setTimeout(() => {
                    if (!GameState.gameActive) return;
                    
                    // å¯åŠ¨ç«ç„°ç§»åŠ¨
                    for (let i = 0; i < fireCount; i++) {
                        const fireInterval = setInterval(() => {
                            if (!GameState.gameActive) return;
                            
                            const currentX = parseFloat(FireManager.elements[i].style.left);
                            const currentY = parseFloat(FireManager.elements[i].style.top);
                            
                            // æ›´æ–°å½“å‰ä½ç½®
                            FireManager.positions[i] = {x: currentX, y: currentY};
                            
                            // æ£€æŸ¥æ˜¯å¦éœ€è¦è®¾ç½®æ–°ç›®æ ‡
                            const distanceToTarget = calculateDistance({x: currentX, y: currentY}, FireManager.targets[i]);
                            
                            if (distanceToTarget < 20) {
                                // ä½¿ç”¨æ”¹è¿›çš„ç›®æ ‡ä½ç½®ç®—æ³•ï¼Œç¡®ä¿ç«ç„°ä¿æŒåˆ†æ•£
                                const newTarget = findTargetPositionWithDispersion(
                                    i, gameWidth, gameHeight, 
                                    GameState.characterX, GameState.characterY, 
                                    extinguisherPositions
                                );
                                FireManager.targets[i] = newTarget;
                            }
                            
                            // æ ¹æ®ç©å®¶æ˜¯å¦ç§»åŠ¨è°ƒæ•´é€Ÿåº¦
                            const moveSpeed = GameState.playerHasMoved ? fireMoveSpeed : fireMoveSpeedIdle;
                            
                            // è®¡ç®—å‘ç›®æ ‡ç§»åŠ¨çš„å‘é‡
                            let dx = FireManager.targets[i].x - currentX;
                            let dy = FireManager.targets[i].y - currentY;
                            
                            // è®¡ç®—ç«ç„°é—´çš„ç¢°æ’æ’æ–¥åŠ›
                            calculateCollisionForces(i, gameWidth, gameHeight);
                            
                            // æ£€æµ‹æ˜¯å¦è¢«å›°åœ¨è§’è½
                            const cornerForce = calculateCornerForce(i, gameWidth, gameHeight);
                            dx += cornerForce.x;
                            dy += cornerForce.y;
                            
                            // æ£€æµ‹ç«ç„°æ˜¯å¦é™æ­¢ï¼Œå¦‚æœæ˜¯åˆ™æ–½åŠ éšæœºæ‰°åŠ¨
                            const randomForce = checkAndApplyRandomForce(i);
                            dx += randomForce.x;
                            dy += randomForce.y;
                            
                            // å°†ç¢°æ’æ’æ–¥åŠ›æ·»åŠ åˆ°ç§»åŠ¨å‘é‡ä¸­
                            dx += FireManager.collisionForces[i].x;
                            dy += FireManager.collisionForces[i].y;
                            
                            // è®¡ç®—æ–°ä½ç½®
                            const newX = currentX + dx * moveSpeed;
                            const newY = currentY + dy * moveSpeed;
                            
                            // é™åˆ¶åœ¨æ¸¸æˆåŒºåŸŸå†…
                            const boundedPos = ensureInBounds(newX, newY, gameWidth, gameHeight, 40, 50);
                            
                            FireManager.elements[i].style.left = boundedPos.x + 'px';
                            FireManager.elements[i].style.top = boundedPos.y + 'px';
                            
                            // æ›´æ–°å½“å‰ä½ç½®
                            FireManager.positions[i] = {x: boundedPos.x, y: boundedPos.y};
                            
                            // æ›´æ–°ä¸Šä¸€å¸§ä½ç½®
                            FireManager.lastPositions[i] = {x: currentX, y: currentY};
                            
                        }, 80); // æ›´æ–°é—´éš”80ms
                        
                        GameState.fireIntervals.push(fireInterval);
                    }
                }, 500); // å»¶è¿Ÿ0.5ç§’å¯åŠ¨ç«ç„°ç§»åŠ¨
                
                // æ·»åŠ æŒç»­ç¢°æ’æ£€æµ‹
                const collisionInterval = setInterval(() => {
                    if (!GameState.gameActive) return;
                    checkCollisions();
                }, 100);
                
                GameState.fireIntervals.push(collisionInterval);
                
            } catch (error) {
                console.error('æ¸¸æˆåˆå§‹åŒ–å¤±è´¥:', error);
                showError('æ¸¸æˆåˆå§‹åŒ–å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
            }
        }
        
        // è®¡ç®—è·ç¦»
        function calculateDistance(pos1, pos2) {
            return Math.sqrt(Math.pow(pos1.x - pos2.x, 2) + Math.pow(pos1.y - pos2.y, 2));
        }
        
        // ç¡®ä¿ä½ç½®åœ¨è¾¹ç•Œå†…
        function ensureInBounds(x, y, gameWidth, gameHeight, elementWidth = 0, elementHeight = 0) {
            return {
                x: Math.max(10, Math.min(x, gameWidth - elementWidth)),
                y: Math.max(10, Math.min(y, gameHeight - elementHeight))
            };
        }
        
        // è®¡ç®—ç«ç„°é—´çš„ç¢°æ’æ’æ–¥åŠ›
        function calculateCollisionForces(fireIndex, gameWidth, gameHeight) {
            // é‡ç½®ç¢°æ’åŠ›
            FireManager.collisionForces[fireIndex] = {x: 0, y: 0};
            
            const currentX = FireManager.positions[fireIndex].x;
            const currentY = FireManager.positions[fireIndex].y;
            
            // æ£€æŸ¥ä¸å…¶ä»–ç«ç„°çš„è·ç¦»
            for (let j = 0; j < FireManager.elements.length; j++) {
                if (j !== fireIndex) {
                    const otherX = FireManager.positions[j].x;
                    const otherY = FireManager.positions[j].y;
                    
                    const distance = calculateDistance({x: currentX, y: currentY}, {x: otherX, y: otherY});
                    
                    // å¦‚æœè·ç¦»å¤ªè¿‘ï¼Œè®¡ç®—æ’æ–¥åŠ›
                    if (distance < minFireDistance) {
                        // è®¡ç®—æ’æ–¥åŠ›æ–¹å‘ï¼ˆè¿œç¦»å…¶ä»–ç«ç„°ï¼‰
                        const angle = Math.atan2(currentY - otherY, currentX - otherX);
                        
                        // è®¡ç®—æ’æ–¥åŠ›å¤§å°ï¼ˆè·ç¦»è¶Šè¿‘ï¼Œæ’æ–¥åŠ›è¶Šå¤§ï¼‰
                        const forceMagnitude = (minFireDistance - distance) * 2.5;
                        
                        // è®¡ç®—æ’æ–¥åŠ›å‘é‡
                        const forceX = Math.cos(angle) * forceMagnitude;
                        const forceY = Math.sin(angle) * forceMagnitude;
                        
                        // æ·»åŠ åˆ°æ€»æ’æ–¥åŠ›
                        FireManager.collisionForces[fireIndex].x += forceX;
                        FireManager.collisionForces[fireIndex].y += forceY;
                    }
                }
            }
        }
        
        // è®¡ç®—è§’è½é€ƒç¦»åŠ›
        function calculateCornerForce(fireIndex, gameWidth, gameHeight) {
            const currentX = FireManager.positions[fireIndex].x;
            const currentY = FireManager.positions[fireIndex].y;
            
            // å®šä¹‰è§’è½åŒºåŸŸï¼ˆè·ç¦»è¾¹ç•Œ50åƒç´ ä»¥å†…çš„åŒºåŸŸï¼‰
            const cornerThreshold = 50;
            let cornerForce = {x: 0, y: 0};
            
            // æ£€æŸ¥æ˜¯å¦åœ¨å·¦è§’è½åŒºåŸŸ
            if (currentX < cornerThreshold) {
                // å‘å³çš„åŠ›
                cornerForce.x += (cornerThreshold - currentX) * 0.1;
            }
            
            // æ£€æŸ¥æ˜¯å¦åœ¨å³è§’è½åŒºåŸŸ
            if (currentX > gameWidth - cornerThreshold) {
                // å‘å·¦çš„åŠ›
                cornerForce.x -= (currentX - (gameWidth - cornerThreshold)) * 0.1;
            }
            
            // æ£€æŸ¥æ˜¯å¦åœ¨ä¸Šè§’è½åŒºåŸŸ
            if (currentY < cornerThreshold) {
                // å‘ä¸‹çš„åŠ›
                cornerForce.y += (cornerThreshold - currentY) * 0.1;
            }
            
            // æ£€æŸ¥æ˜¯å¦åœ¨ä¸‹è§’è½åŒºåŸŸ
            if (currentY > gameHeight - cornerThreshold) {
                // å‘ä¸Šçš„åŠ›
                cornerForce.y -= (currentY - (gameHeight - cornerThreshold)) * 0.1;
            }
            
            return cornerForce;
        }
        
        // æ£€æŸ¥å¹¶æ–½åŠ éšæœºåŠ›ï¼ˆé˜²æ­¢ç«ç„°é™æ­¢ï¼‰
        function checkAndApplyRandomForce(fireIndex) {
            const currentX = FireManager.positions[fireIndex].x;
            const currentY = FireManager.positions[fireIndex].y;
            const lastX = FireManager.lastPositions[fireIndex].x;
            const lastY = FireManager.lastPositions[fireIndex].y;
            
            // è®¡ç®—ç§»åŠ¨è·ç¦»
            const moveDistance = calculateDistance({x: currentX, y: currentY}, {x: lastX, y: lastY});
            
            // å¦‚æœç§»åŠ¨è·ç¦»å¾ˆå°ï¼Œå¢åŠ é™æ­¢è®¡æ•°å™¨
            if (moveDistance < 2) {
                FireManager.stuckCounters[fireIndex]++;
            } else {
                FireManager.stuckCounters[fireIndex] = 0;
            }
            
            // å¦‚æœè¿ç»­5å¸§å‡ ä¹é™æ­¢ï¼Œæ–½åŠ éšæœºåŠ›
            if (FireManager.stuckCounters[fireIndex] > 5) {
                const randomAngle = Math.random() * Math.PI * 2;
                const randomForce = 30; // éšæœºåŠ›çš„å¤§å°
                
                // é‡ç½®è®¡æ•°å™¨
                FireManager.stuckCounters[fireIndex] = 0;
                
                return {
                    x: Math.cos(randomAngle) * randomForce,
                    y: Math.sin(randomAngle) * randomForce
                };
            }
            
            return {x: 0, y: 0};
        }
        
        // æ”¹è¿›çš„ç›®æ ‡ä½ç½®ç®—æ³• - ç¡®ä¿ç«ç„°ä¿æŒåˆ†æ•£
        function findTargetPositionWithDispersion(fireIndex, gameWidth, gameHeight, playerX, playerY, extinguisherPositions) {
            const minDistanceToOtherFires = minFireDistance;
            const minDistanceToExtinguisher = 60 * screenSizeFactor;
            const minAngleChange = 60 * (Math.PI / 180); // å¢åŠ åˆ°60åº¦ï¼Œç¡®ä¿æ–¹å‘å·®å¼‚æ›´å¤§
            
            let bestPosition = null;
            let bestScore = -Infinity;
            
            // è®¡ç®—å½“å‰ç§»åŠ¨æ–¹å‘
            const currentX = FireManager.positions[fireIndex].x;
            const currentY = FireManager.positions[fireIndex].y;
            const lastDirection = FireManager.lastDirections[fireIndex];
            
            // è®¡ç®—æ‰€æœ‰å…¶ä»–ç«ç„°çš„ä½ç½®
            const otherFires = [];
            for (let j = 0; j < FireManager.elements.length; j++) {
                if (j !== fireIndex) {
                    otherFires.push(FireManager.positions[j]);
                }
            }
            
            // å°è¯•å¤šä¸ªå€™é€‰ä½ç½®
            for (let attempt = 0; attempt < 80; attempt++) {
                let candidateX, candidateY;
                
                // ç­–ç•¥1ï¼šå°è¯•è¿œç¦»å…¶ä»–ç«ç„°çš„æ–¹å‘ï¼ˆå¢å¼ºæ’æ–¥åŠ›ï¼‰
                if (attempt < 40 && otherFires.length > 0) {
                    // è®¡ç®—æ’æ–¥åŠ› - è¿œç¦»å…¶ä»–ç«ç„°ï¼ˆå¢å¼ºæ’æ–¥åŠ›ï¼‰
                    let repelX = 0, repelY = 0;
                    for (const otherFire of otherFires) {
                        const dx = currentX - otherFire.x;
                        const dy = currentY - otherFire.y;
                        const distance = Math.sqrt(dx*dx + dy*dy);
                        if (distance > 0 && distance < 200 * screenSizeFactor) { // æ ¹æ®å±å¹•å°ºå¯¸è°ƒæ•´ä½œç”¨èŒƒå›´
                            // åœ¨å°å±å¹•ä¸Šå¢å¼ºæ’æ–¥åŠ›
                            const forceMultiplier = screenSizeFactor < 0.8 ? 2.0 : 1.5;
                            const force = forceMultiplier * 300 / (distance * distance); // ä½¿ç”¨å¹³æ–¹åæ¯”å¢å¼ºæ’æ–¥åŠ›
                            repelX += dx * force;
                            repelY += dy * force;
                        }
                    }
                    
                    // æ ‡å‡†åŒ–æ’æ–¥åŠ›å‘é‡
                    const repelLength = Math.sqrt(repelX*repelX + repelY*repelY);
                    if (repelLength > 0) {
                        repelX /= repelLength;
                        repelY /= repelLength;
                        
                        // åœ¨æ’æ–¥æ–¹å‘ä¸Šç”Ÿæˆå€™é€‰ä½ç½®ï¼ˆå¢åŠ æ’æ–¥è·ç¦»ï¼‰
                        const angle = Math.atan2(repelY, repelX) + (Math.random() - 0.5) * 0.3;
                        const distance = (60 + Math.random() * 80) * screenSizeFactor; // æ ¹æ®å±å¹•å°ºå¯¸è°ƒæ•´æ’æ–¥è·ç¦»
                        candidateX = currentX + Math.cos(angle) * distance;
                        candidateY = currentY + Math.sin(angle) * distance;
                    } else {
                        // å¦‚æœæ²¡æœ‰æ’æ–¥åŠ›ï¼Œä½¿ç”¨éšæœºæ–¹å‘
                        candidateX = 30 + Math.random() * (gameWidth - 80);
                        candidateY = 30 + Math.random() * (gameHeight - 80);
                    }
                } else {
                    // ç­–ç•¥2ï¼šéšæœºåˆ†å¸ƒåœ¨æ•´ä¸ªæ¸¸æˆåŒºåŸŸï¼Œä½†é¿å…è¾¹ç¼˜
                    candidateX = 30 + Math.random() * (gameWidth - 80);
                    candidateY = 30 + Math.random() * (gameHeight - 80);
                }
                
                // ç¡®ä¿ä¸è¶…å‡ºè¾¹ç•Œ
                candidateX = Math.max(15, Math.min(candidateX, gameWidth - 45));
                candidateY = Math.max(15, Math.min(candidateY, gameHeight - 55));
                
                // è®¡ç®—æ–°ç§»åŠ¨æ–¹å‘
                const dx = candidateX - currentX;
                const dy = candidateY - currentY;
                const newDirection = Math.atan2(dy, dx);
                
                // è®¡ç®—è§’åº¦å˜åŒ–
                let angleChange = Math.abs(newDirection - lastDirection);
                if (angleChange > Math.PI) {
                    angleChange = 2 * Math.PI - angleChange;
                }
                
                // ç¡®ä¿è§’åº¦å˜åŒ–å¤§äº60åº¦
                if (angleChange < minAngleChange) {
                    continue;
                }
                
                // å¦‚æœç©å®¶æ²¡æœ‰ç§»åŠ¨è¿‡ï¼Œé¿å…é è¿‘ç©å®¶
                if (!GameState.playerHasMoved) {
                    const playerDistance = calculateDistance({x: candidateX, y: candidateY}, {x: playerX, y: playerY});
                    if (playerDistance < 80 * screenSizeFactor) continue;
                }
                
                // æ£€æŸ¥ä¸å…¶ä»–ç«ç„°çš„è·ç¦»
                let valid = true;
                let minFireDistance = Infinity;
                
                for (let j = 0; j < FireManager.elements.length; j++) {
                    if (j !== fireIndex) {
                        const distance = calculateDistance({x: candidateX, y: candidateY}, FireManager.positions[j]);
                        minFireDistance = Math.min(minFireDistance, distance);
                        if (distance < minDistanceToOtherFires) {
                            valid = false;
                            break;
                        }
                    }
                }
                
                if (!valid) continue;
                
                // æ£€æŸ¥ä¸ç­ç«å™¨çš„è·ç¦» - é¿å…ç«ç„°èšé›†åœ¨ç­ç«å™¨æ—è¾¹
                let tooCloseToExtinguisher = false;
                for (const pos of extinguisherPositions) {
                    const distance = calculateDistance({x: candidateX, y: candidateY}, pos);
                    if (distance < minDistanceToExtinguisher) {
                        tooCloseToExtinguisher = true;
                        break;
                    }
                }
                if (tooCloseToExtinguisher) continue;
                
                // è®¡ç®—åˆ†æ•°ï¼šä¼˜å…ˆé€‰æ‹©è¿œç¦»å…¶ä»–ç«ç„°çš„ä½ç½®ï¼ŒåŒæ—¶è€ƒè™‘è§’åº¦å˜åŒ–
                const score = minFireDistance + angleChange * 20; // å¢åŠ è§’åº¦å˜åŒ–æƒé‡
                
                if (score > bestScore) {
                    bestScore = score;
                    bestPosition = {x: candidateX, y: candidateY};
                    
                    // æ›´æ–°ç§»åŠ¨æ–¹å‘
                    FireManager.lastDirections[fireIndex] = newDirection;
                }
            }
            
            // å¦‚æœæ‰¾ä¸åˆ°ç†æƒ³ä½ç½®ï¼Œæ”¾å®½è§’åº¦é™åˆ¶
            if (!bestPosition) {
                for (let attempt = 0; attempt < 40; attempt++) {
                    let candidateX = 30 + Math.random() * (gameWidth - 80);
                    let candidateY = 30 + Math.random() * (gameHeight - 80);
                    
                    candidateX = Math.max(15, Math.min(candidateX, gameWidth - 45));
                    candidateY = Math.max(15, Math.min(candidateY, gameHeight - 55));
                    
                    // æ”¾å®½æ¡ä»¶ï¼Œä¸æ£€æŸ¥è§’åº¦
                    if (!GameState.playerHasMoved) {
                        const playerDistance = calculateDistance({x: candidateX, y: candidateY}, {x: playerX, y: playerY});
                        if (playerDistance < 80 * screenSizeFactor) continue;
                    }
                    
                    let valid = true;
                    let minFireDistance = Infinity;
                    
                    for (let j = 0; j < FireManager.elements.length; j++) {
                        if (j !== fireIndex) {
                            const distance = calculateDistance({x: candidateX, y: candidateY}, FireManager.positions[j]);
                            minFireDistance = Math.min(minFireDistance, distance);
                            if (distance < minDistanceToOtherFires) {
                                valid = false;
                                break;
                            }
                        }
                    }
                    
                    if (!valid) continue;
                    
                    let tooCloseToExtinguisher = false;
                    for (const pos of extinguisherPositions) {
                        const distance = calculateDistance({x: candidateX, y: candidateY}, pos);
                        if (distance < minDistanceToExtinguisher) {
                            tooCloseToExtinguisher = true;
                            break;
                        }
                    }
                    if (tooCloseToExtinguisher) continue;
                    
                    const score = minFireDistance;
                    
                    if (score > bestScore) {
                        bestScore = score;
                        bestPosition = {x: candidateX, y: candidateY};
                        
                        // æ›´æ–°ç§»åŠ¨æ–¹å‘
                        const dx = candidateX - currentX;
                        const dy = candidateY - currentY;
                        FireManager.lastDirections[fireIndex] = Math.atan2(dy, dx);
                    }
                }
            }
            
            // å¦‚æœè¿˜æ˜¯æ‰¾ä¸åˆ°ä½ç½®ï¼Œè¿”å›éšæœºä½ç½®
            if (!bestPosition) {
                bestPosition = {
                    x: 30 + Math.random() * (gameWidth - 80),
                    y: 30 + Math.random() * (gameHeight - 80)
                };
                
                // æ›´æ–°ç§»åŠ¨æ–¹å‘
                const dx = bestPosition.x - currentX;
                const dy = bestPosition.y - currentY;
                FireManager.lastDirections[fireIndex] = Math.atan2(dy, dx);
            }
            
            return bestPosition;
        }
        
        function checkCollisions() {
            if (!GameState.gameActive) return;
            
            // è·å–ç©å®¶å…ƒç´ çš„å®æ—¶è¾¹ç•Œæ¡†
            const characterRect = GameState.character.getBoundingClientRect();
            const gameAreaRect = gameArea.getBoundingClientRect();
            
            // è®¡ç®—ç©å®¶åœ¨æ¸¸æˆåŒºåŸŸå†…çš„ç›¸å¯¹ä½ç½®
            const charX = characterRect.left - gameAreaRect.left;
            const charY = characterRect.top - gameAreaRect.top;
            const charWidth = characterRect.width;
            const charHeight = characterRect.height;
            
            // æ£€æŸ¥ä¸ç«ç„°çš„ç¢°æ’ - ä½¿ç”¨è¾¹ç¼˜æ¥è§¦æ£€æµ‹
            for (let i = 0; i < FireManager.elements.length; i++) {
                const fireRect = FireManager.elements[i].getBoundingClientRect();
                
                // è®¡ç®—ç«ç„°åœ¨æ¸¸æˆåŒºåŸŸå†…çš„ç›¸å¯¹ä½ç½®
                const fireX = fireRect.left - gameAreaRect.left;
                const fireY = fireRect.top - gameAreaRect.top;
                const fireWidth = fireRect.width;
                const fireHeight = fireRect.height;
                
                // ç²¾ç¡®çš„çŸ©å½¢ç¢°æ’æ£€æµ‹ - è¾¹ç¼˜æ¥è§¦å³è§¦å‘
                if (charX < fireX + fireWidth && 
                    charX + charWidth > fireX && 
                    charY < fireY + fireHeight && 
                    charY + charHeight > fireY) {
                    
                    gameOver('ä½ è¢«ç«ç„°çƒ«åˆ°å•¦ï¼Œå†è¯•ä¸€æ¬¡å§ï¼');
                    return;
                }
            }
            
            // æ£€æŸ¥ä¸ç­ç«å™¨çš„ç¢°æ’
            const extinguishers = document.querySelectorAll('.extinguisher');
            for (const extinguisher of extinguishers) {
                const extRect = extinguisher.getBoundingClientRect();
                
                const extX = extRect.left - gameAreaRect.left;
                const extY = extRect.top - gameAreaRect.top;
                const extWidth = extRect.width;
                const extHeight = extRect.height;
                
                // ç­ç«å™¨ç¢°æ’æ£€æµ‹ä¹Ÿä½¿ç”¨è¾¹ç¼˜æ¥è§¦
                if (charX < extX + extWidth && charX + charWidth > extX && 
                    charY < extY + extHeight && charY + charHeight > extY) {
                    
                    const extinguisherType = extinguisher.dataset.type;
                    
                    if (extinguisherType === GameState.currentScene.correct) {
                        gameWin();
                    } else {
                        gameOver('é€‰æ‹©é”™è¯¯ï¼Œå†è¯•ä¸€æ¬¡å§ï¼');
                    }
                    return;
                }
            }
        }
        
        function updateTimer() {
            GameState.timeLeft--;
            timeDisplay.textContent = GameState.timeLeft;
            
            // å½“æ—¶é—´å‰©ä½™10ç§’æ—¶å¢åŠ éš¾åº¦
            if (GameState.timeLeft <= 10 && !GameState.difficultyIncreased) {
                increaseDifficulty();
            }
            
            if (GameState.timeLeft <= 0) {
                gameOver('æ—¶é—´åˆ°äº†ï¼Œå†è¯•ä¸€æ¬¡å§ï¼');
            }
        }
        
        function gameWin() {
            GameState.gameActive = false;
            clearInterval(GameState.timer);
            GameState.fireIntervals.forEach(interval => clearInterval(interval));
            
            // è®¡ç®—ç”¨æ—¶
            const timeUsed = GameState.difficulty.timeLimit - GameState.timeLeft;
            
            // æ›´æ–°æ¸¸æˆç»Ÿè®¡
            GameStats.successCount++;
            
            // æ›´æ–°æœ€ä½³æ—¶é—´
            if (!GameStats.bestTime || timeUsed < GameStats.bestTime) {
                GameStats.bestTime = timeUsed;
            }
            
            // ä¿å­˜ç»Ÿè®¡
            saveGameStats();
            updateStatsDisplay();
            
            // åˆ›å»ºç²’å­æ•ˆæœ
            createParticleEffect(GameState.characterX, GameState.characterY, '#4d96ff', 20);
            
            resultIcon.textContent = 'ğŸ‰';
            resultMessage.textContent = `æ­å–œä½ æˆåŠŸäº†ï¼ç”¨æ—¶${timeUsed}ç§’`;
            resultScreen.style.display = 'flex';
            gameScreen.style.display = 'none';
        }
        
        function gameOver(message) {
            GameState.gameActive = false;
            clearInterval(GameState.timer);
            GameState.fireIntervals.forEach(interval => clearInterval(interval));
            
            // åˆ›å»ºç²’å­æ•ˆæœ
            createParticleEffect(GameState.characterX, GameState.characterY, '#ff6b6b', 15);
            
            resultIcon.textContent = 'ğŸ˜¢';
            resultMessage.textContent = message;
            resultScreen.style.display = 'flex';
            gameScreen.style.display = 'none';
        }
        
        function restartGame() {
            rulesScreen.style.display = 'flex';
            gameScreen.style.display = 'none';
            resultScreen.style.display = 'none';
        }
        
        // åˆ›å»ºç²’å­æ•ˆæœ
        function createParticleEffect(x, y, color, count) {
            for (let i = 0; i < count; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.backgroundColor = color;
                particle.style.left = (x + 22.5) + 'px';
                particle.style.top = (y + 22.5) + 'px';
                
                // éšæœºæ–¹å‘
                const angle = Math.random() * Math.PI * 2;
                const speed = 2 + Math.random() * 3;
                const size = 4 + Math.random() * 4;
                
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                
                gameArea.appendChild(particle);
                
                // åŠ¨ç”»
                const startTime = Date.now();
                const duration = 800 + Math.random() * 400;
                
                function animateParticle() {
                    const elapsed = Date.now() - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    if (progress >= 1) {
                        particle.remove();
                        return;
                    }
                    
                    // ç§»åŠ¨ç²’å­
                    const moveX = Math.cos(angle) * speed * progress * 50;
                    const moveY = Math.sin(angle) * speed * progress * 50;
                    
                    particle.style.transform = `translate(${moveX}px, ${moveY}px)`;
                    particle.style.opacity = 1 - progress;
                    
                    requestAnimationFrame(animateParticle);
                }
                
                requestAnimationFrame(animateParticle);
            }
        }
        
        // æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
        function showError(message) {
            const errorEl = document.createElement('div');
            errorEl.className = 'error-message';
            errorEl.textContent = message;
            gameArea.appendChild(errorEl);
        }
        
        // åˆå§‹åŒ–æ¸¸æˆ
        init();
    </script>
</body>
</html>